---
/* Load your social list */
import social_data from '../../data/social-data.ts';

type Social = { id?: string | number; label?: string; icon?: string; link?: string };

/* Trusted badges (Astro serves /public at the web root) */
const trustedLogos = [
  { src: '/images/brand/BCI.avif',                   alt: 'BCI Better Cotton Initiative' },
  { src: '/images/brand/confidence_Textiles.avif',   alt: 'OEKO-TEX Standard' },
  { src: '/images/brand/ecovero.avif',               alt: 'Lenzing EcoVero' },
  { src: '/images/brand/global.avif',                alt: 'Global Recycled Standard' },
  { src: '/images/brand/organic.avif',               alt: 'Organic 100 Content Standard' },
  { src: '/images/brand/gold.avif',                  alt: 'Organic 100 Content Standard' },
];

const norm = (it: Social) =>
  `${(it?.label||'').toLowerCase().trim()}|${(it?.icon||'').toLowerCase().trim()}|${(it?.link||'').toLowerCase().replace(/\/+$/,'').trim()}`;

const isYouTube = (it: Social) => {
  const s = `${it?.label ?? ''} ${it?.icon ?? ''} ${it?.link ?? ''}`.toLowerCase();
  return s.includes('youtube') || s.includes('youtu.be') || s.includes('youtube.com');
};

/* Deduplicate & cap to 5 */
const socials: Social[] = (() => {
  const seen = new Set<string>();
  const cleaned = (social_data as Social[] || []).filter((it) => {
    const key = norm(it);
    if (seen.has(key)) return false;
    seen.add(key);
    return Boolean(it?.link) && Boolean(it?.icon || it?.label);
  });
  return cleaned.slice(0, 5);
})();

const year = new Date().getFullYear();
---

<footer aria-label="Site Footer" class="age-footer">
  <div class="age-footer__gradient">
    <!-- ===== TOP ===== -->
    <div class="age-footer__top">
      <div class="age-container">
        <div class="age-grid" role="list">
          <!-- Addresses -->
          <div class="age-col" role="listitem">
            <div class="age-widget">
              <div class="age-addressBoard" aria-label="Company addresses">
                <div class="age-addressSection">
                  <div class="age-addressTitle">Office Address</div>
                  <div class="age-addressLines">
                    <div>404, 4th Floor, Safal Prelude,</div>
                    <div>Behind YMCA Club, Corporate Road,</div>
                    <div>Prahlad Nagar, Ahmedabad, Gujarat, India – 380015</div>
                  </div>
                </div>
                <div class="age-addressSection">
                  <div class="age-addressTitle">Factory Address</div>
                  <div class="age-addressLines">
                    <div>1, Mohan Estate, Ramol Road,</div>
                    <div>Ahmedabad, Gujarat, India – 382449</div>
                  </div>
                </div>
                <div class="age-addressSection">
                  <div class="age-addressTitle">Warehouse Address</div>
                  <div class="age-addressLines">
                    <div>Nr. Ambuja Synthetics, B/H Old Narol Court,</div>
                    <div>Narol, Ahmedabad, Gujarat, India – 382405</div>
                  </div>
                </div>
                <div class="age-addressSection age--noSep">
                  <div class="age-addressTitle">UAE Office Address</div>
                  <div class="age-addressLines">
                    <div>GSK Worldwide FZE, Ajman Free Zone, UAE</div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- My Account -->
          <div class="age-col" role="listitem">
            <div class="age-widget">
              <h4 class="age-title">My Account</h4>
              <ul class="age-list">
                <li><a href="#" class="age-link">Track Orders</a></li>
                <li><a href="#" class="age-link">Shipping</a></li>
                <li><a href="#" class="age-link">Wishlist</a></li>
                <li><a href="#" class="age-link">My Account</a></li>
                <li><a href="#" class="age-link">Order History</a></li>
                <li><a href="#" class="age-link">Returns</a></li>
              </ul>
            </div>
          </div>

          <!-- Information -->
          <div class="age-col" role="listitem">
            <div class="age-widget">
              <h4 class="age-title">Information</h4>
              <ul class="age-list">
                <li><a href="#" class="age-link">Our Story</a></li>
                <li><a href="#" class="age-link">Careers</a></li>
                <li><a href="#" class="age-link">Privacy Policy</a></li>
                <li><a href="#" class="age-link">Terms &amp; Conditions</a></li>
                <li><a href="#" class="age-link">Latest News</a></li>
                <li><a href="#" class="age-link">Contact Us</a></li>
              </ul>
            </div>
          </div>

          <!-- Talk To Us -->
          <div class="age-col" role="listitem">
            <div class="age-widget">
              <h4 class="age-title">Talk To Us</h4>

              <!-- Newsletter (no JS: button is type="button") -->
              <div class="age-newsMini">
                <p class="age-newsDesc">Subscribe to our newsletter to get the latest news and offers.</p>
                <form class="age-pill" action="#" method="post">
                  <input type="email" required placeholder="Subscribe with us" aria-label="Email address" />
                  <button type="button" aria-label="Subscribe" class="age-pillBtn">
                    <span class="age-arrow">›</span>
                  </button>
                </form>
              </div>

              <!-- Phone / Email -->
              <div class="age-talk">
                <div class="age-talkRow">
                  <span class="age-talkIcon">
                    <!-- Phone -->
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                      <path d="M22 16.92v2a2 2 0 0 1-2.18 2 19.84 19.84 0 0 1-8.63-3.07A19.5 19.5 0 0 1 3.15 12.8 19.84 19.84 0 0 1 .08 4.18 2 2 0 0 1 2.06 2h2a2 2 0 0 1 2 1.72c.12.86.34 1.7.66 2.5a2 2 0 0 1-.45 2.11L5.4 9.91a16 16 0 0 0 8.69 8.69l1.58-1.87a2 2 0 0 1 2.11-.45c.8.32 1.64.54 2.5.66A2 2 0 0 1 22 16.92z"/>
                    </svg>
                  </span>
                  <a class="age-talkLink" href="tel:+919925155141">+91 9925155141</a>
                </div>
                <div class="age-talkRow">
                  <span class="age-talkIcon">
                    <!-- Email -->
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                      <path d="M4 4h16a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2z"/>
                      <path d="m22 6-10 7L2 6"/>
                    </svg>
                  </span>
                  <a class="age-talkLink" href="mailto:info@amrita-fashions.com">info@amrita-fashions.com</a>
                </div>
              </div>

              <!-- HQ quick line -->
              <div class="age-talkAddress">
                <div class="age-addrRow">
                  <span class="age-addrPin">
                    <!-- Location -->
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                      <path d="M21 10c0 7-9 13-9 13S3 17 3 10a9 9 0 1 1 18 0Z"/>
                      <circle cx="12" cy="10" r="3"/>
                    </svg>
                  </span>
                  <div class="age-addrLines">
                    <div>4th Floor, Safal Prelude</div>
                    <div>404 Corporate Road, Near YMCA Club,</div>
                    <div>Prahlad Nagar, Ahmedabad, Gujarat</div>
                    <div>380015</div>
                  </div>
                </div>
              </div>

              <!-- Social (wrap; no scrollbar) -->
              <div class="age-social" role="group" aria-label="Social links">
                {socials.map((s) => {
                  const t = `${s?.label ?? ''} ${s?.icon ?? ''} ${s?.link ?? ''}`.toLowerCase();
                  const brand =
                    t.includes('youtube') || t.includes('youtu') ? 'youtube' :
                    t.includes('instagram') || t.includes('insta') ? 'instagram' :
                    t.includes('facebook') || t.includes('fb.') ? 'facebook' :
                    t.includes('linkedin') ? 'linkedin' :
                    (t.includes('x.com') || t.includes('twitter')) ? 'x' : 'generic';

                  return (
                    <a
                      key={s.id ?? norm(s)}
                      href={s.link!}
                      target="_blank"
                      rel="noopener noreferrer"
                      aria-label={s.label || 'Social link'}
                      title={s.label || undefined}
                      class="age-socialBtn"
                    >
                      {
                        brand === 'youtube' ? (
                          /* rounded screen + play (inherits color) */
                          <svg width="20" height="20" viewBox="0 0 24 24" aria-hidden="true">
                            <rect x="2.5" y="6.5" width="19" height="11" rx="3" ry="3" fill="none" stroke="currentColor" stroke-width="2"/>
                            <path d="M10 9.7v4.6l4.8-2.3L10 9.7z" fill="currentColor"/>
                          </svg>
                        ) : brand === 'instagram' ? (
                          <svg width="20" height="20" viewBox="0 0 24 24" aria-hidden="true">
                            <rect x="3" y="3" width="18" height="18" rx="5" ry="5" fill="none" stroke="currentColor" stroke-width="2"/>
                            <circle cx="12" cy="12" r="4.1" fill="none" stroke="currentColor" stroke-width="2"/>
                            <circle cx="17" cy="7" r="1.3" fill="currentColor"/>
                          </svg>
                        ) : brand === 'facebook' ? (
                          <svg width="20" height="20" viewBox="0 0 24 24" aria-hidden="true">
                            <path d="M13.4 20v-7H16l.5-3h-3v-1.3c0-1 .4-1.7 1.8-1.7H16.5V4.5c-.3 0-.9-.1-1.9-.1-2.8 0-4.2 1.2-4.2 4.1V10H8v3h2.4v7h3z" fill="currentColor"/>
                          </svg>
                        ) : brand === 'linkedin' ? (
                          <svg width="20" height="20" viewBox="0 0 24 24" aria-hidden="true">
                            <rect x="4" y="10" width="3" height="10" rx=".6" fill="currentColor"/>
                            <circle cx="5.5" cy="6.5" r="1.5" fill="currentColor"/>
                            <path d="M10 10h3v1.4c.6-.9 1.5-1.6 3-1.6 2.3 0 3.5 1.4 3.5 3.9V20h-3v-4.6c0-1.3-.6-2-1.8-2s-1.9.8-1.9 2.1V20h-2.8V10z" fill="currentColor"/>
                          </svg>
                        ) : brand === 'x' ? (
                          <svg width="20" height="20" viewBox="0 0 24 24" aria-hidden="true">
                            <path d="M4 4l16 16M20 4L4 20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                          </svg>
                        ) : (
                          /* generic external */
                          <svg width="20" height="20" viewBox="0 0 24 24" aria-hidden="true">
                            <path d="M12 8h6v6" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M6 18L18 6" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                          </svg>
                        )
                      }
                    </a>
                  );
                })}
              </div>
            </div>
          </div>

        </div>
      </div>
    </div>

    <!-- ===== Bottom ===== -->
    <div class="age-footer__bottom">
      <div class="age-container">
        <div class="age-bottomWrap">
          <div class="age-topbar"></div>
          <p class="age-copy">
            <strong>© {year} Amrita Global Enterprises</strong>
            <span class="age-dot">•</span>
            All rights reserved
            <span class="age-dot">•</span>
            Crafting quality textiles for a better tomorrow
          </p>

          <div class="age-trust">
            {trustedLogos.map((l) => (
              <div class="age-trustCard" title={l.alt}>
                <img src={l.src} alt={l.alt} width="60" height="60" loading="lazy" decoding="async" fetchpriority="low" style="width:36px;height:auto;max-height:36px;" />
              </div>
            ))}
          </div>
        </div>
      </div>
    </div>
  </div>

  <style>
    /* Map to theme tokens (no font imports; only Hind via --tp-ff-*) */
    .age-footer{
      --BG_TOP:     var(--tp-theme-1, #112338);
      --BG_BOTTOM:  var(--tp-footer-grey-1, #142A42);
      --BRAND_BLUE: var(--tp-theme-primary, #2C4C97);
      --BRAND_GOLD: var(--tp-theme-secondary, #D6A74B);
      --TEXT_MAIN:  var(--tp-common-white, #E9F1FA);
      --TEXT_SOFT:  rgba(233,241,250,.78);
      --BORDER_SOFT: rgba(255,255,255,.12);

      font-family: var(--tp-ff-body); /* ✅ Only theme font */
      color: var(--TEXT_MAIN);
    }
    .age-footer__gradient{ background:linear-gradient(180deg,var(--BG_TOP),var(--BG_BOTTOM)); border-top:1px solid var(--BORDER_SOFT); }

    .age-container{ max-width:1200px; margin:0 auto; padding:0 16px; }

    .age-grid{ display:grid; grid-template-columns: 1.2fr .8fr .9fr .9fr; gap:28px; }
    @media (max-width: 1100px){ .age-grid{ grid-template-columns: 1fr 1fr; gap:24px; } }
    @media (max-width: 640px){ .age-grid{ grid-template-columns: 1fr; gap:20px; } }

    .age-col{ min-width:0; }

    .age-footer__top{ padding:48px 0 26px; }
    .age-footer__bottom{ background:linear-gradient(180deg,rgba(255,255,255,.04),rgba(255,255,255,0)); border-top:1px solid var(--BORDER_SOFT); padding:14px 0 20px; }

    /* Headings use display token; weight 700 (Hind max in your import) */
    .age-title{
      font-family: var(--tp-ff-display);
      color:var(--TEXT_MAIN);
      font-weight:700;
      font-size:20px;
      letter-spacing:.2px;
      margin:0 0 18px;
      position:relative;
    }
    .age-title::after{ content:''; position:absolute; left:0; bottom:-8px; width:36px; height:3px; border-radius:3px; background:linear-gradient(90deg,var(--BRAND_GOLD),var(--BRAND_BLUE)); opacity:.95; }

    .age-list{ list-style:none; margin:0; padding:0; }
    .age-list li{ margin:0 0 10px; }
    .age-footer a.age-link{
      display:inline-block; font-weight:600; font-size:15px; text-decoration:none;
      color:var(--TEXT_MAIN) !important;
      border-bottom:1px dashed rgba(255,255,255,.25) !important;
      transition:color .22s ease, transform .15s ease, border-bottom-color .22s ease;
    }
    .age-footer a.age-link:hover{
      color:var(--BRAND_GOLD) !important;
      border-bottom-color:var(--BRAND_GOLD) !important;
      transform:translateX(3px);
    }

    .age-addressBoard{
      background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(255,255,255,.03));
      border:1px solid var(--BORDER_SOFT); border-radius:16px; padding:16px 16px 8px;
    }
    .age-addressSection{ position:relative; padding:10px 0 12px; }
    .age-addressSection:not(.age--noSep)::after{ content:''; position:absolute; left:0; right:0; bottom:0; height:1px; background:var(--BORDER_SOFT); }
    .age-addressTitle{
      font-family: var(--tp-ff-display);
      font-weight:700; letter-spacing:.2px; margin:0 0 6px; color:var(--TEXT_MAIN);
      display:flex; align-items:center; gap:8px;
    }
    .age-addressTitle::before{ content:''; width:8px; height:8px; border-radius:50%; background:linear-gradient(90deg,var(--BRAND_GOLD),var(--BRAND_BLUE)); box-shadow:0 0 0 3px rgba(255,255,255,.06); }
    .age-addressLines{ color:var(--TEXT_SOFT); line-height:1.65; }

    .age-newsMini{ margin:6px 0 12px; }
    .age-newsDesc{ color:var(--TEXT_SOFT); margin:0 0 10px; font-size:18px; line-height:1.65; }

    /* Ensure inputs use theme font */
    .age-pill{ position:relative; display:flex; align-items:center; background:#fff; border:1px solid rgba(0,0,0,.04); border-radius:9999px; height:52px; padding:6px; box-shadow:0 10px 26px rgba(0,0,0,.18); }
    .age-pill input{
      flex:1; height:100%; background:transparent; border:none; color:#0b1220; padding:0 18px; outline:none; font-size:15px;
      font-family: var(--tp-ff-body);
    }
    .age-pill input::placeholder{ color:#6b7280; }
    .age-pillBtn{ width:40px; height:40px; border-radius:9999px; border:none; cursor:pointer; display:flex; align-items:center; justify-content:center; background:var(--BRAND_GOLD); color:#fff; box-shadow:0 10px 22px rgba(214,167,75,.35); }
    .age-arrow{ font-size:24px; line-height:1; transform:translateY(-1px); }

    .age-talk{ margin:12px 0 6px; }
    .age-talkRow{ display:flex; gap:10px; align-items:center; margin:6px 0; }
    .age-talkIcon{ color:var(--BRAND_GOLD); display:inline-flex; align-items:center; justify-content:center; }
    .age-talkLink{ color:var(--TEXT_MAIN); text-decoration:none; border-bottom:1px dashed rgba(255,255,255,.25); transition:color .22s ease, border-bottom-color .22s ease; }
    .age-talkLink:hover{ color:var(--BRAND_GOLD); border-bottom-color:var(--BRAND_GOLD); }

    .age-talkAddress{ margin-top:6px; }
    .age-addrRow{ display:flex; gap:10px; align-items:flex-start; }
    .age-addrPin{ color:var(--BRAND_GOLD); display:inline-flex; align-items:center; justify-content:center; }
    .age-addrLines{ line-height:1.65; color:var(--TEXT_SOFT); }

    /* SOCIAL: wrap; no scrollbars; same visual weight */
    .age-social{
      display:flex; gap:8px; margin-top:14px; flex-wrap:wrap; align-items:center;
      max-width:100%; overflow:visible; -ms-overflow-style:none; scrollbar-width:none;
    }
    .age-social::-webkit-scrollbar{ display:none; }

    .age-socialBtn{
      flex:0 0 auto; width:44px; height:44px; border-radius:12px;
      display:inline-flex; align-items:center; justify-content:center;
      color:var(--TEXT_MAIN);
      border:1px solid var(--BORDER_SOFT);
      background:rgba(255,255,255,.06);
      transition:transform .15s ease, box-shadow .2s ease, background .2s;
    }
    .age-socialBtn i,
    .age-socialBtn svg{
      font-size:20px; width:20px; height:20px; line-height:1;
    }
    .age-socialBtn:hover{
      transform:translateY(-3px);
      background:linear-gradient(180deg,rgba(255,255,255,.18),rgba(255,255,255,.08));
      box-shadow:0 10px 24px rgba(0,0,0,.35);
    }
    .age-socialBtn:focus-visible{
      outline:none;
      box-shadow:0 0 0 3px rgba(214,167,75,.35), 0 10px 24px rgba(0,0,0,.35);
    }

    .age-bottomWrap{ display:flex; flex-direction:column; align-items:center; text-align:center; gap:10px; }
    .age-topbar{ width:72px; height:3px; border-radius:3px; background:linear-gradient(90deg,var(--BRAND_BLUE),var(--BRAND_GOLD)); opacity:.9; }
    .age-copy{ margin:0; color:var(--TEXT_SOFT); font-size:14.5px; letter-spacing:.25px; }
    .age-copy strong{ color:var(--TEXT_MAIN); font-weight:700; }
    .age-dot{ margin:0 10px; color:rgba(255,255,255,.45); }

    .age-trust{ display:flex; gap:10px; margin-top:2px; flex-wrap:wrap; justify-content:center; }
    .age-trustCard{
      width:52px; height:52px; border-radius:12px; background:#fff;
      border:1px solid rgba(16,24,40,.08);
      box-shadow:0 6px 16px rgba(0,0,0,.18), inset 0 1px 0 rgba(255,255,255,.7);
      display:flex; align-items:center; justify-content:center;
      transition:transform .16s ease, box-shadow .16s ease, filter .16s ease;
    }
    .age-trustCard:hover{ transform:translateY(-2px); box-shadow:0 10px 22px rgba(0,0,0,.25), inset 0 1px 0 rgba(255,255,255,.85); }
    .age-trustCard img{ max-height:36px; filter:grayscale(.05) saturate(.95) contrast(1.05); }
    .age-trustCard:hover img{ filter:grayscale(0) saturate(1.2) contrast(1.1); }

    @media (max-width:991px){
      .age-title{ font-size:18px; }
      .age-footer__top{ padding:40px 0 22px; }
    }
    @media (max-width:575px){
      .age-copy{ font-size:13.6px; }
      .age-trustCard{ width:42px; height:42px; border-radius:10px; }
      .age-trustCard img{ max-height:30px; }
    }

    /* Optional dark mode tweaks */
    :global(.theme-dark) .age-footer{
      --TEXT_MAIN: var(--tp-common-black, #e7edf6);
      --TEXT_SOFT: rgba(231,237,246,.78);
    }
  </style>
</footer>
